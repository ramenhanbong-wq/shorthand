<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SHORTHAND PRO - ì¡¸ì—…ì‹œí—˜</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        /* [1] ê³µí†µ ë””ìì¸ ë³€ìˆ˜ */
        :root {
            --bg-body: #F0F4F8; 
            --sidebar-bg: #F8F9FA;
            --primary: #6C5CE7; 
            --primary-light: #A29BFE;
            --text-dark: #2D3436; 
            --text-grey: #636E72;
            --white: #FFFFFF;
            --shadow-card: 0 4px 20px rgba(0,0,0,0.03);
            --radius-card: 24px;
            
            --danger: #FF7675;
            --success: #00B894;
            --muted: #B2BEC3;
        }

        body {
            font-family: 'Pretendard', sans-serif; background: var(--bg-body);
            color: var(--text-dark); margin: 0; padding: 0; 
            display: flex; height: 100vh; overflow: hidden;
        }

        /* [ëª¨ë°”ì¼ ì „ìš© ë²„íŠ¼] */
        .mobile-menu-btn {
            display: none; position: fixed; top: 15px; left: 15px; z-index: 1001;
            background: var(--primary); color: white; border: none;
            border-radius: 8px; padding: 8px 12px; font-size: 1.5rem; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .sidebar-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 999; backdrop-filter: blur(3px);
        }

        /* ì‚¬ì´ë“œë°” */
        .sidebar {
            width: 260px; background: var(--sidebar-bg); padding: 30px 20px; 
            display: flex; flex-direction: column; border-right: 2px solid #E1E4E8;
            flex-shrink: 0; z-index: 1000; box-shadow: 2px 0 10px rgba(0,0,0,0.03);
            transition: transform 0.3s ease;
        }
        .logo { font-size: 1.4rem; font-weight: 900; color: var(--primary); margin-bottom: 40px; padding-left: 10px; }
        
        .nav-list { list-style: none; padding: 0; margin: 0; flex: 1; }
        .nav-item {
            padding: 14px 18px; margin-bottom: 12px; border-radius: 14px;
            color: var(--text-grey); font-weight: 700; cursor: pointer; text-decoration: none;
            display: flex; align-items: center; gap: 12px; transition: 0.2s;
            background: white; border: 1px solid #EAEAEA; box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }
        .nav-item:hover, .nav-item.active { 
            background: var(--primary); color: white; border-color: var(--primary);
            transform: translateY(-2px); box-shadow: 0 4px 8px rgba(108, 92, 231, 0.3);
        }
        .nav-icon { width: 24px; text-align: center; }

        .profile-card {
            background: white; padding: 15px; border-radius: 16px;
            display: flex; align-items: center; gap: 12px; cursor: pointer; transition: 0.3s; margin-top: auto;
            border: 1px solid #EAEAEA;
        }
        .profile-card:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1; padding: 40px 50px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px;
        }

        .page-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 10px; }
        .page-title h2 { font-size: 1.8rem; font-weight: 800; margin: 0; color: var(--text-dark); }
        .page-title p { color: var(--text-grey); margin: 5px 0 0 0; }

        .card-box {
            background: var(--white); border-radius: var(--radius-card); padding: 30px;
            box-shadow: var(--shadow-card); transition: 0.3s; border: 1px solid #DCE0E5;
        }

        .toolbar { 
            display: flex; gap: 12px; background: #F8F9FA; padding: 15px; border-radius: 16px; border: 1px solid #E1E4E8; 
            align-items: center; flex-wrap: wrap; margin-bottom: 20px;
        }
        
        select { 
            padding: 12px 20px; border-radius: 12px; border: 2px solid #E1E4E8; 
            cursor: pointer; font-weight: bold; background: white; font-family: inherit; font-size: 1rem;
            outline: none; transition: 0.2s;
        }
        select:focus { border-color: var(--primary); }

        .btn { 
            padding: 12px 25px; border-radius: 12px; border: none; 
            cursor: pointer; font-weight: 800; transition: 0.2s; font-size: 1rem;
        }
        .btn-start { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(108, 92, 231, 0.2); }
        .btn-start:hover { transform: translateY(-2px); box-shadow: 0 8px 15px rgba(108, 92, 231, 0.3); }
        
        .btn-ghost { background: white; border: 2px solid #E1E4E8; color: var(--text-grey); }
        .btn-ghost:hover { border-color: var(--primary); color: var(--primary); background: #fff; }

        .hint-label { 
            display: inline-block; background: #EEEBFF; color: var(--primary); 
            padding: 5px 12px; border-radius: 8px; font-weight: 800; font-size: 0.9rem; 
            margin-bottom: 10px; border: 1px solid #D1C4E9;
        }

        #text-display { 
            font-size: 1.6rem; font-weight: 700; min-height: 80px; padding: 30px; 
            background: #FFFEFC; border-radius: 20px; border: 2px solid #E1E4E8; 
            margin-bottom: 25px; word-break: keep-all; line-height: 1.6; color: var(--text-dark);
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.02); text-align: center;
        }

        input[type="text"] { 
            width: 100%; padding: 20px; font-size: 1.5rem; border: 3px solid #E1E4E8; 
            border-radius: 16px; box-sizing: border-box; outline: none; transition: 0.3s;
            text-align: center; font-family: 'Pretendard', sans-serif;
        }
        input[type="text"]:focus { border-color: var(--primary); box-shadow: 0 0 0 5px rgba(108, 92, 231, 0.1); background: white; }
        input[type="text"]:disabled { background: #F0F4F8; cursor: not-allowed; }

        #history-section { margin-top: 30px; display: none; }
        table { width: 100%; border-collapse: separate; border-spacing: 0; width: 100%; }
        th { background: #F8F9FA; color: var(--text-grey); font-weight: 700; padding: 15px; border-bottom: 2px solid #E1E4E8; }
        td { padding: 15px; border-bottom: 1px solid #F0F4F8; text-align: center; font-weight: 500; }
        tr:last-child td { border-bottom: none; }

        #quiz-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6); z-index: 2000; 
            flex-direction: column; align-items: center; justify-content: center; 
            backdrop-filter: blur(8px);
        }
        #quiz-card-box {
            background: white; padding: 40px; border-radius: 30px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 600px; width: 90%;
            text-align: center; border: 1px solid #E1E4E8; animation: slideUp 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        #quiz-sentence { font-size: 1.5rem; color: var(--text-dark); margin-bottom: 25px; font-weight: 700; line-height: 1.5; }
        #quiz-feedback { margin-top: 25px; min-height: 100px; visibility: hidden; width: 100%; background: #F8F9FA; padding: 15px; border-radius: 12px; }
        
        .status-msg { font-size: 1.5rem; font-weight: 900; margin-bottom: 10px; display: block; }
        .wrong { color: var(--danger); text-decoration: line-through; margin-right: 5px; opacity: 0.7; }
        .correct-info { color: var(--primary); font-weight: 800; font-size: 1.3rem; margin-top: 10px; display: block; }

        /* [ëª¨ë°”ì¼ ëŒ€ì‘] */
        @media (max-width: 768px) {
            body { overflow: auto; }
            .sidebar { position: fixed; top: 0; left: 0; height: 100%; transform: translateX(-100%); box-shadow: 2px 0 15px rgba(0,0,0,0.1); }
            .sidebar.active { transform: translateX(0); }
            .sidebar-overlay.active { display: block; }
            .mobile-menu-btn { display: block; }
            
            .main-content { padding: 70px 20px 20px; width: 100%; box-sizing: border-box; }
            #text-display { font-size: 1.3rem; padding: 20px; }
            input[type="text"] { font-size: 1.2rem; padding: 15px; }
            .toolbar { flex-direction: column; align-items: stretch; }
            .btn { width: 100%; }
            .card-box { padding: 20px; }
        }
    </style>
</head>
<body>

<div id="quiz-overlay">
    <div id="quiz-card-box">
        <h3 style="color:var(--primary); margin-top:0; font-weight:900; letter-spacing:-0.5px;">ğŸ’Š ì•½ì–´ í€´ì¦ˆ (<span id="quiz-count">1/10</span>)</h3>
        <p style="color:#888; font-size:0.9rem; margin-bottom:20px;">ì•„ë˜ ë¬¸ì¥ì˜ 'ì•½ì–´'ë¥¼ ì •í™•í•˜ê²Œ ì…ë ¥í•˜ì„¸ìš”.</p>
        
        <p id="quiz-sentence"></p>
        
        <input type="text" id="quiz-input" placeholder="ì •ë‹µ ì…ë ¥" autocomplete="off" style="border-color:var(--primary);">
        
        <div id="quiz-feedback">
            <div id="status-text" class="status-msg"></div>
            <div class="diff-text" id="user-diff-display" style="font-size:1.1rem; margin-bottom:5px;"></div>
            <div class="correct-info" id="quiz-correct-ans"></div>
        </div>
    </div>
</div>

<button class="mobile-menu-btn" onclick="toggleSidebar()">â˜°</button>
<div class="sidebar-overlay" onclick="toggleSidebar()"></div>

<nav class="sidebar">
    <div class="logo">âš¡ SHORTHAND</div>
    <ul class="nav-list">
        <a href="index.html" class="nav-item"><span class="nav-icon">ğŸ“Š</span> ëŒ€ì‹œë³´ë“œ</a>
        <a href="toksori2.html" class="nav-item"><span class="nav-icon">ğŸ“</span> ë˜‘ì†Œë¦¬ 2</a>
        <a href="king.html" class="nav-item"><span class="nav-icon">ğŸ‘‘</span> íƒ€ìì™•</a>
        <a href="exam.html" class="nav-item active"><span class="nav-icon">ğŸ“</span> ì¡¸ì—…ì‹œí—˜</a>
        <a href="sparta.html" class="nav-item"><span class="nav-icon">ğŸ”¥</span> ìŠ¤íŒŒë¥´íƒ€</a>
        <a href="random.html" class="nav-item"><span class="nav-icon">ğŸ²</span> ì•½ì–´ëœë¤</a>
        <a href="measure.html" class="nav-item"><span class="nav-icon">â±ï¸</span> ììˆ˜ì¸¡ì •</a>
    </ul>
    <div class="profile-card" onclick="logout()">
        <div style="width:35px; height:35px; background:#D6A2E8; border-radius:10px; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold;">U</div>
        <div>
            <div style="font-weight:700; font-size:0.9rem;" id="sideUserName">User</div>
            <div style="font-size:0.75rem; color:#888;">ë¡œê·¸ì•„ì›ƒ</div>
        </div>
    </div>
</nav>

<main class="main-content">
    
    <div class="page-header">
        <div class="page-title">
            <h2>ğŸ“ ì…ë¬¸ë°˜ ì¡¸ì—… ì‹œí—˜</h2>
            <p id="stat-progress">ì„¸íŠ¸ë¥¼ ì„ íƒí•˜ê³  ì—°ìŠµì„ ì‹œì‘í•˜ì„¸ìš”.</p>
        </div>
        <button onclick="logout()" class="btn-ghost" style="color:var(--danger); border-color:var(--danger); padding:8px 15px; font-size:0.9rem;">ë¡œê·¸ì•„ì›ƒ</button>
    </div>

    <div class="card-box">
        <div class="toolbar">
            <div style="flex:1; display:flex; gap:10px; align-items:center;">
                <span style="font-weight:700; color:#555;">ë¬¸ì œ ì„¸íŠ¸:</span>
                <select id="set-selector">
                    <option value="1">ì œ 1ì„¸íŠ¸</option><option value="2">ì œ 2ì„¸íŠ¸</option><option value="3">ì œ 3ì„¸íŠ¸</option>
                    <option value="4">ì œ 4ì„¸íŠ¸</option><option value="5">ì œ 5ì„¸íŠ¸</option><option value="6">ì œ 6ì„¸íŠ¸</option>
                    <option value="7">ì œ 7ì„¸íŠ¸</option><option value="8">ì œ 8ì„¸íŠ¸</option><option value="9">ì œ 9ì„¸íŠ¸</option>
                </select>
            </div>
            <button onclick="startPractice()" class="btn btn-start">ğŸš€ ì—°ìŠµ ì‹œì‘</button>
            <button class="btn btn-ghost" onclick="toggleHistory()">ğŸ“Š ê²°ê³¼ ê¸°ë¡í•¨</button>
        </div>

        <span class="hint-label">ì—°ìŠµ ë¬¸ì¥</span>
        <div id="text-display">ì„¸íŠ¸ë¥¼ ì„ íƒí•˜ê³  ì—°ìŠµ ì‹œì‘ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>

        <span class="hint-label" style="background:#FFF3E0; color:#FF9800; border-color:#FFE0B2;">ì…ë ¥ (Enter = ì œì¶œ)</span>
        <input type="text" id="typing-input" disabled autocomplete="off" placeholder="ì—°ìŠµ ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.">

        <div id="history-section">
            <h3 style="margin-bottom:15px; color:var(--text-dark);">ğŸ“Š ìµœê·¼ ì‘ì‹œ ê¸°ë¡</h3>
            <div style="border-radius:12px; overflow:hidden; border:1px solid #E1E4E8;">
                <table id="result-table">
                    <thead>
                        <tr><th>ì„¸íŠ¸</th><th>í‰ê· ì†ë„</th><th>ì•½ì–´ì •í™•ë„</th><th>ìµœì¢…ê²°ê³¼</th></tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

</main>

<script>
    // ì‚¬ì´ë“œë°” í† ê¸€ í•¨ìˆ˜ ì¶”ê°€
    function toggleSidebar() {
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.querySelector('.sidebar-overlay');
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
    }

    const ALL_SETS = {
        "1": [ {s:"ì‚¬íšŒëŠ” í•˜ë‚˜ì˜ ë°°ì™€ ê°™ì€ ê²ƒì´ë‹¤.", a:"íšŒëŠ” ì˜ ì™€ ê°™ì€ ê²ƒì´ë‹¤."}, {s:"ì´ ì„¸ìƒì— ì•…ì´ ì—†ë‹¤ë©´ ì„ ë„ ì—†ì„ ê²ƒì´ë‹¤.", a:"ì— ì´ ì—†ë‹¤ë©´ ë„ ì—†ì„ ê²ƒì´ë‹¤."}, {s:"ëˆˆì—ì„œ ë©€ì–´ì§€ë©´ ë§ˆìŒì—ì„œ ë©€ì–´ì§„ë‹¤.", a:"ì—ì„œ ì§€ë©´ ì—ì„œ ì§„ë‹¤."}, {s:"ìš°ë¦¬ëŠ” ë¶€ì •ë¶€íŒ¨ ì²™ê²°ì— ë‚˜ì„œê³  ìˆìŠµë‹ˆë‹¤.", a:"ë¦¬ëŠ” ì— ê³  ìˆìŠµë‹ˆë‹¤."}, {s:"ìš°ë¦¬ëŠ” ì‹œì¸í•˜ì§€ ì•Šì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", a:"ë¦¬ëŠ” í•˜ì§€ ì•Šì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}, {s:"ì–¼êµ´ì€ ê²°ì½” ê±°ì§“ë§ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤.", a:"ì€ ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤."}, {s:"ìƒˆë¡œìš´ ì„¸ê³„ë¥¼ ì°½ì¡°í•´ë‚´ê³  ìˆìŠµë‹ˆë‹¤.", a:"ë¥¼ ê³  ìˆìŠµë‹ˆë‹¤."}, {s:"ìœ„ê¸°ë¥¼ ë§ê³  ìˆëŠ” ê²ƒì€ ìš°ë¦¬ ë¯¼ì£¼ì£¼ì˜ì…ë‹ˆë‹¤.", a:"ë¥¼ ê³  ìˆëŠ” ê²ƒì€ ì…ë‹ˆë‹¤."}, {s:"ë„ë•ì  ìŠ¹ë¦¬ëŠ” ì…ˆì„ í•˜ì§€ ì•ŠëŠ” ê²ƒì´ë‹¤.", a:"ë¦¬ëŠ” ì„ í•˜ì§€ ì•ŠëŠ” ê²ƒì´ë‹¤."}, {s:"í¬ë§ì´ ì—†ë‹¤ë©´ ì•„ë¬´ê²ƒë„ ì„±ê³µí•˜ì§€ ëª»í•œë‹¤.", a:"ì´ ì—†ë‹¤ë©´ ê²ƒë„ í•˜ì§€ í•œë‹¤."} ],
        "2": [ {s:"ì‚¬ë‘ì€ ì•„ë‚Œì—†ì´ ëºëŠ” ê²ƒì´ë‹¤.", a:"ì€ ì—†ì´ ëŠ” ê²ƒì´ë‹¤."}, {s:"ìš°ë¦¬ê°€ ê±´ì„¤í•˜ê³ ì í•˜ëŠ” êµ­ê°€ì…ë‹ˆë‹¤.", a:"ê°€ í•˜ê³ ì í•˜ëŠ” ì…ë‹ˆë‹¤."}, {s:"ë”ë¶ˆì–´ ì†ì¡ê³  ì‚¬ëŠ” ì‚¬íšŒë¥¼ ê±´ì„¤í•˜ëŠ” ì¼ì…ë‹ˆë‹¤.", a:"ê³  ì‚¬ëŠ” ë¥¼ í•˜ëŠ” ì…ë‹ˆë‹¤."}, {s:"ìƒˆë¡œìš´ ì„¸ê³„ì§ˆì„œê°€ ëª¨ìƒ‰ë˜ê³  ìˆìŠµë‹ˆë‹¤.", a:"ê°€ ë˜ê³  ìˆìŠµë‹ˆë‹¤."}, {s:"ë¬´ì—‡ë³´ë‹¤ ì¸ê°„ì„±ì„ íšŒë³µí•´ì•¼ í•©ë‹ˆë‹¤.", a:"ì„ í•©ë‹ˆë‹¤."}, {s:"êµ­ê°€ì™€ ë¯¼ì¡±ì„ ìœ„í•´ ìš°ë¦¬ í•¨ê»˜ ë…¸ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.", a:"ì™€ ì„ í•©ë‹ˆë‹¤."}, {s:"í•œêµ­ì€ ìˆ˜ì¤€ ë†’ì€ ë¯¼ì£¼ì •ì¹˜ë¥¼ ì‹¤í˜„í–ˆìŠµë‹ˆë‹¤.", a:"ì€ ì€ ë¥¼ í–ˆìŠµë‹ˆë‹¤."}, {s:"ì—ë„ˆì§€ ì ˆì•½í•˜ëŠ” ê¸¸ë°–ì— ì—†ìŠµë‹ˆë‹¤.", a:"í•˜ëŠ” ì— ì—†ìŠµë‹ˆë‹¤."}, {s:"ëŒ€í†µë ¹ ì„ ê±°ê°€ ëˆˆì•ì— ë‹¤ê°€ì™”ìŠµë‹ˆë‹¤.", a:"ê°€ ì— ìŠµë‹ˆë‹¤."}, {s:"ìƒˆë¡œìš´ ì‚¬ê³ ë¥¼ ìš”êµ¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.", a:"ë¥¼ í•˜ê³  ìˆìŠµë‹ˆë‹¤."} ],
        "3": [ {s:"ìˆ˜ì¶œì˜ìš•ì˜ íšŒìƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.", a:"ì˜ ì´ í•©ë‹ˆë‹¤."}, {s:"ë‚˜ë¼ì˜ ì¤‘ì‹¬ì€ ì¤‘ì†Œê¸°ì—…ì…ë‹ˆë‹¤.", a:"ì˜ ì€ ì…ë‹ˆë‹¤."}, {s:"ìš°ë¦¬ì™€ í•¨ê»˜ í‰í™”í†µì¼ë¡œ ê°€ëŠ” ê²ƒì…ë‹ˆë‹¤.", a:"ì™€ ë¡œ ê°€ëŠ” ê²ƒì…ë‹ˆë‹¤."}, {s:"ìƒˆë¡œìš´ êµ­ì œì§ˆì„œê°€ í˜•ì„±ë˜ê³  ìˆìŠµë‹ˆë‹¤.", a:"ê°€ ë˜ê³  ìˆìŠµë‹ˆë‹¤."}, {s:"ì—¬ëŸ¬ë¶„ì„ ìë‘ìŠ¤ëŸ½ê²Œ ìƒê°í•˜ê³  ìˆìŠµë‹ˆë‹¤.", a:"ì„ ê²Œ í•˜ê³  ìˆìŠµë‹ˆë‹¤."}, {s:"ì§€ì›ê³¼ í˜‘ë ¥ì„ ì•„ë¼ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.", a:"ê³¼ ì„ ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤."}, {s:"ê³ ìœ„ê³µì§ìë“¤ì´ ì¬ì‚°ì„ ê³µê°œí–ˆìŠµë‹ˆë‹¤.", a:"ì´ ì„ í–ˆìŠµë‹ˆë‹¤."}, {s:"ìš°ë¦¬ëŠ” ë”ë¶ˆì–´ ì‚¬ëŠ” ê³µë™ì²´ì…ë‹ˆë‹¤.", a:"ë¦¬ëŠ” ì‚¬ëŠ” ì…ë‹ˆë‹¤."}, {s:"ê³ ë‚œ ì†ì—ì„œ ì¢Œì ˆí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.", a:"ì—ì„œ í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."}, {s:"ìš°ë¦¬ëŠ” ëª©ë„í•˜ê³  ìˆì§€ ì•ŠìŠµë‹ˆê¹Œ?", a:"ë¦¬ëŠ” í•˜ê³  ìˆ ì§€ ì•ŠìŠµë‹ˆê¹Œ?"} ],
        "4": [ {s:"ì—¬ìì—ê²Œ ê°€ì¥ ì—„ê²©í•œ ê²ƒì€ ì—¬ìì´ë‹¤.", a:"ì—ê²Œ í•œ ê²ƒì€ ì´ë‹¤."}, {s:"ì‹œë ¨ì„ ê·¹ë³µí•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.", a:"ì„ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤."}, {s:"êµ­ë¯¼ì—ê²Œ ê·¸ê²ƒì„ í˜¸ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", a:"ì—ê²Œ ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}, {s:"ë‹¤ìŒì€ ë…¸ì‚¬ë¬¸ì œì— ëŒ€í•´ ë¬»ê² ìŠµë‹ˆë‹¤.", a:"ì€ ì— ìŠµë‹ˆë‹¤."}, {s:"ëŒ€ë¹„ë¥¼ íŠ¼íŠ¼íˆ í•˜ì§€ ì•Šì„ ìˆ˜ ì—†ë‹¤.", a:"ë¥¼ í•˜ì§€ ì•Šì„ ìˆ˜ ì—†ë‹¤."}, {s:"ê·¸ê²ƒì€ ë‚˜ë¼ ë°”ë¡œ ì„¸ìš°ê¸°ì¸ ê²ƒì…ë‹ˆë‹¤.", a:"ì€ ë¡œ ê²ƒì…ë‹ˆë‹¤."}, {s:"ìš°ë¦¬ êµ­ë¯¼ì€ ìì‹ ê°ì„ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.", a:"ì€ ì„ í•©ë‹ˆë‹¤."}, {s:"ì‚¬íšŒëŠ” ê±°ëŒ€í™”ëœ ì •ë³´ì²´ê³„ë¥¼ ì´ë£¬ë‹¤.", a:"íšŒëŠ” ë¥¼ ë£¬ë‹¤."}, {s:"ë¶ë°©ì •ì±…ì„ ì ê·¹ì ìœ¼ë¡œ ì¶”ì§„í•´ì•¼ í•œë‹¤.", a:"ì„ ì ìœ¼ë¡œ í•œë‹¤."}, {s:"ìš°ë¦¬ëŠ” ì§€ê¸ˆ ê°•ë ¥í•œ ì •ë¶€ë¥¼ ì• ì¨ ì´ë£©í–ˆë‹¤.", a:"ë¦¬ëŠ” í•œ ë¥¼ í–ˆë‹¤."} ],
        "5": [ {s:"êµ­íšŒëŠ” ë¯¼ì£¼ì£¼ì˜ì˜ ì „ë‹¹ì¸ ê²ƒì…ë‹ˆë‹¤.", a:"íšŒëŠ” ì˜ ê²ƒì…ë‹ˆë‹¤."}, {s:"ì–´ë¦°ì´ ì‚¬ë‘ì€ ë‚˜ë¼ ì‚¬ë‘ì…ë‹ˆë‹¤.", a:"ì€ ì…ë‹ˆë‹¤."}, {s:"ê¹¨ì–´ ìˆë‹¤ëŠ” ê²ƒì€ ì‚´ì•„ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.", a:"ìˆë‹¤ëŠ” ê²ƒì€ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤."}, {s:"ìœ„ëŒ€í•œ ì‚¬ëŒì€ ìœ„ëŒ€í•œ ì‚¬ë‘ì„ í•œë‹¤.", a:"í•œ ì€ í•œ ì„ í•œë‹¤."}, {s:"êµ­ë¯¼ ëª¨ë‘ì˜ ìë°œì ì¸ ì°¸ì—¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.", a:"ì˜ ì ì¸ ê°€ í•©ë‹ˆë‹¤."}, {s:"ë†’ì€ ë„ë•ì„±ì´ ì¤‘ì‹œë˜ì–´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.", a:"ì€ ì´ ë˜ì–´ì•¼ ê²ƒì…ë‹ˆë‹¤."}, {s:"í˜•ì‹ì ì¸ ì§€ì ìœ¼ë¡œ ê·¸ì¹˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.", a:"ì ì¸ ìœ¼ë¡œ ì¹˜ëŠ” ê°€ ë§ë‹¤."}, {s:"ë‚´ì¼ì„ í–¥í•œ ì´ì •í‘œì´ê¸°ë„ í•©ë‹ˆë‹¤.", a:"ì„ í•œ ë„ í•©ë‹ˆë‹¤."}, {s:"ì•„ì‹œì•„ íƒœí‰ì–‘ ì‹œëŒ€ëŠ” ì €ì ˆë¡œ ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤.", a:"ëŒ€ëŠ” ë¡œ ì§€ ì•ŠìŠµë‹ˆë‹¤."}, {s:"í™˜ê²½ì€ ì¸ê°„ì´ ìƒì¡´í•˜ëŠ” ë°”íƒ•ì…ë‹ˆë‹¤.", a:"ì€ ì´ í•˜ëŠ” ì…ë‹ˆë‹¤."} ],
        "6": [ {s:"ëª¨ë‘ì˜ í˜ì„ ëª¨ì•„ í’ìš”ë¡œìš´ ì‚¬íšŒë¥¼ ë§Œë“­ì‹œë‹¤.", a:"ì˜ ì„ ë¥¼ ë‹¤."}, {s:"ë²•ê³¼ ë„ë•ì˜ ì¤‘ìš”ì„±ì„ ì¬ì¸ì‹í•´ì•¼ í•©ë‹ˆë‹¤.", a:"ê³¼ ì˜ ì„ í•©ë‹ˆë‹¤."}, {s:"ê²½ì œë ¥ë§Œìœ¼ë¡œ ì„ ì§„êµ­ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", a:"ìœ¼ë¡œ ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}, {s:"í•™êµì˜ ììœ¨ì€ ìµœëŒ€í•œ ì¡´ì¤‘ë˜ì–´ì•¼ í•œë‹¤.", a:"ì˜ ì€ í•œ ë˜ì–´ì•¼ í•œë‹¤."}, {s:"ìƒˆë¡œìš´ ì‹œëŒ€ ì—´ì–´ê°€ì•¼ í•œë‹¤ê³  ë´…ë‹ˆë‹¤.", a:"ë‹¤ê³  ë´…ë‹ˆë‹¤."}, {s:"ì •ë¶€ëŠ” ì•ˆì •ê³¼ í¸ì˜ë¥¼ ë„ëª¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.", a:"ë¶€ëŠ” ê³¼ ë¥¼ í•˜ê³  ìˆìŠµë‹ˆë‹¤."}, {s:"í¬ê²Œ ê¸°ì—¬í•˜ëŠ” ë‚˜ë¼ë¥¼ ë§Œë“¤ê³ ì í•©ë‹ˆë‹¤.", a:"ê²Œ í•˜ëŠ” ë¥¼ ê³ ì í•©ë‹ˆë‹¤."}, {s:"ì´ê²ƒì´ ë¯¸ë˜ë¡œ ë‚˜ì•„ê°€ëŠ” í•œêµ­ì˜ ì´ì•¼ê¸°ì…ë‹ˆë‹¤.", a:"ì´ ë¡œ ê°€ëŠ” ì˜ ì…ë‹ˆë‹¤."}, {s:"ìš°ë¦¬ ë‘ ë‚˜ë¼ëŠ” ê°€ì¥ ê°€ê¹Œìš´ ë²—ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.", a:"ë¼ëŠ” ì´ ë˜ì—ˆìŠµë‹ˆë‹¤."}, {s:"ë¯¸ë˜ë¥¼ ì´ëŒì–´ê°€ëŠ” ì§€ë„ìê°€ ë  ê²ƒì…ë‹ˆë‹¤.", a:"ë¥¼ ê°€ëŠ” ê°€ ê²ƒì…ë‹ˆë‹¤."} ],
        "7": [ {s:"ê°œí˜ì€ ë¯¼ì¡±ì˜ ìƒì¡´ì„ ìœ„í•´ í”¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", a:"ì€ ì˜ ì„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}, {s:"ê²½ìŸë ¥ì„ ë†’ì´ê¸°ì— ì•ì¥ì„œ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.", a:"ì„ ì— ëë‹ˆë‹¤."}, {s:"ìš°ë¦¬ëŠ” ë•Œë•Œë¡œ ì—­ê²½ì„ ê²ªê²Œ ëœë‹¤.", a:"ë¦¬ëŠ” ë¡œ ì„ ê²Œ ëœë‹¤."}, {s:"í•œêµ­ì˜ ì„±ê³µì€ ë¬´ì—‡ë³´ë‹¤ë„ í‰í™”ì˜ ê²°ì‹¤ì…ë‹ˆë‹¤.", a:"ì˜ ì€ ë„ ì˜ ì…ë‹ˆë‹¤."}, {s:"ì•ìœ¼ë¡œ ë³´ë‹¤ ê°•ë ¥í•œ ë™ë°˜ìê°€ ë  ê²ƒì…ë‹ˆë‹¤.", a:"ìœ¼ë¡œ í•œ ê°€ ê²ƒì…ë‹ˆë‹¤."}, {s:"ê°êµ­ì˜ ê³µë™ë…¸ë ¥ê³¼ í˜‘ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.", a:"ì˜ ê³¼ ì´ í•©ë‹ˆë‹¤."}, {s:"ëª¨ë“  ë¬¸ì œë¥¼ ë¶„ëª…íˆ ì¸ì‹í•˜ì˜€ìŠµë‹ˆë‹¤.", a:"ë¥¼ í•˜ì˜€ìŠµë‹ˆë‹¤."}, {s:"êµ­ê°€ì™€ ë¯¼ì¡±ì„ ìœ„í•´ ë‹¤ í•¨ê»˜ ëœì‹œë‹¤.", a:"ì™€ ì„ ë‹¤."}, {s:"í•œë°˜ë„ ì—­ì‚¬ì˜ ë°œì „ì„ ê°€ë¡œë§‰ê³  ìˆìŠµë‹ˆë‹¤.", a:"ì˜ ì„ ê³  ìˆìŠµë‹ˆë‹¤."}, {s:"ê·¸ ì–´ëŠ ë•Œë³´ë‹¤ ë°”ì‚ ì›€ì§ì—¬ì•¼ í–ˆìŠµë‹ˆë‹¤.", a:"í–ˆìŠµë‹ˆë‹¤."} ],
        "8": [ {s:"ì •ë¶€ì˜ ì˜ˆì‚°ì„ ê¹¨ë—í•˜ê³  ë°”ë¥´ê²Œ ì¨ì•¼ í•œë‹¤.", a:"ì˜ ì„ í•˜ê³  ë¥´ê²Œ í•œë‹¤."}, {s:"ì¤‘ì†Œê¸°ì—…ì˜ íˆ¬ìê°€ í™œê¸°ë¥¼ ë ê³  ìˆìŠµë‹ˆë‹¤.", a:"ì˜ ê°€ ë¥¼ ê³  ìˆìŠµë‹ˆë‹¤."}, {s:"ì´ì œ ì—¬ëŸ¬ë¶„ë„ í”¼ë¶€ë¡œ ëŠë‚„ ê²ƒì…ë‹ˆë‹¤.", a:"ë„ ë¡œ ê²ƒì…ë‹ˆë‹¤."}, {s:"ì„¸ê³„ê°€ í•˜ë‚˜ì˜ ê³µë™ì²´ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.", a:"ê°€ ì˜ ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤."}, {s:"ë°˜ë“œì‹œ ë‚¨ê³¼ ë¶ì€ í†µì¼ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.", a:"ê³¼ ì€ ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."}, {s:"ì•„ì‹œì•„ì—ëŠ” í•œêµ­ì´ ë²„í‹°ê³  ìˆë‹¤.", a:"ì—ëŠ” ì´ ê³  ìˆë‹¤."}, {s:"ë²„ë ¤ì§„ ì„¬ë§ˆë‹¤ ê½ƒì´ í”¼ì—ˆë‹¤.", a:"ì´ ì—ˆë‹¤."}, {s:"ë‘ ë‚˜ë¼ êµ­ë¯¼ì—ê²Œ ì˜ë¯¸ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤.", a:"ì—ê²Œ ìˆëŠ” ì…ë‹ˆë‹¤."}, {s:"í•¨ê»˜ ë‹¬ë ¤ì˜¨ ì¥ì •ì„ ë³´ëŒë˜ê²Œ ìƒê°í•©ë‹ˆë‹¤.", a:"ì„ ë˜ê²Œ í•©ë‹ˆë‹¤."}, {s:"í•œë°˜ë„ ì •ì„¸ëŠ” ì•„ì§ ëƒ‰ì „ ìƒíƒœì…ë‹ˆë‹¤.", a:"ì„¸ëŠ” ì…ë‹ˆë‹¤."} ],
        "9": [ {s:"ì˜ë¯¸ ìˆëŠ” í•œ ë‹¬ì„ ë³´ë‚´ì•¼ í•˜ê² ìŠµë‹ˆë‹¤.", a:"ìˆëŠ” ì„ ìŠµë‹ˆë‹¤."}, {s:"ìš°ë¦¬ì˜ êµ­ì œì  ìœ„ìƒì„ ì‹¤ê°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.", a:"ì˜ ì  ì„ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤."}, {s:"ìš°ë¦¬ ëª¨ë‘ê°€ ë‹¤ ì˜ì›…ì´ ë  ìˆ˜ ì—†ë‹¤.", a:"ê°€ ì´ ë  ìˆ˜ ì—†ë‹¤."}, {s:"ë‚´ ì‚¬ë‘ì€ ìƒëª…ì˜ ê½ƒì´ë‹¤.", a:"ì€ ì˜ ì´ë‹¤."}, {s:"ë¹ˆê³¤ì€ ì¬ì•™ì´ ì•„ë‹ˆë¼ ë¶ˆí¸ì´ë‹¤.", a:"ì€ ì´ ì´ë‹¤."}, {s:"ê²°í˜¼ì€ ì‚¬ë‘ì˜ ë¬´ë¤ì´ ì•„ë‹™ë‹ˆë‹¤.", a:"ì€ ì˜ ì´ ë‹™ë‹ˆë‹¤."}, {s:"ëŒì•„ë³¸ ê³¼ê±°ì˜ ì‚¶ì€ ìˆœê°„ë“¤ì˜ ì—°ì†ì´ë‹¤.", a:"ì˜ ì€ ì˜ ì´ë‹¤."}, {s:"ì ê·¹ ê²€í† í•˜ì—¬ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.", a:"í•˜ì—¬ ì§ˆ ìˆ˜ ìˆë„ë¡ ìŠµë‹ˆë‹¤."}, {s:"ìœ¡ì•„íœ´ì§ ì˜ë¬´í™”ë¥¼ ë°˜ë“œì‹œ ì„±ì‚¬ì‹œí‚¤ê² ìŠµë‹ˆë‹¤.", a:"ë¥¼ ìŠµë‹ˆë‹¤."}, {s:"í•œêº¼ë²ˆì— ì œë„ì  ì¥ì¹˜ë¥¼ ë§ˆë ¨í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆê¹Œ?", a:"ì— ì  ë¥¼ í•  ìˆ˜ ëŠ” ì—†ìŠµë‹ˆê¹Œ?"} ]
    };

    let currentIndex = 0, currentSentences = [], lineStartTime = null, speeds = [];
    let isQuizMode = false, quizIndex = 0, totalAbbrChars = 0, correctAbbrChars = 0;
    let backspaceCount = 0;

    const inputEl = document.getElementById('typing-input'), displayEl = document.getElementById('text-display');
    const quizOverlay = document.getElementById('quiz-overlay'), quizInput = document.getElementById('quiz-input');
    const currentUser = sessionStorage.getItem('shorthand_user');

    if(currentUser && document.getElementById('sideUserName')) {
        document.getElementById('sideUserName').innerText = currentUser;
    }

    // [ì±„ì  ê¸°ì¤€ ë³€ê²½ ì ìš©] ê³µë°±, íŠ¹ìˆ˜ë¬¸ì ì œê±° í›„ ë¹„êµ
    function cleanText(str) {
        return str.replace(/[^ê°€-í£a-zA-Z0-9]/g, ""); 
    }

    function normalizeForQuiz(s) {
        if (!s) return "";
        return s.replace(/\s/g, "").replace(/ìœ¼ë¡œëŠ”/g, "ë¯€ë¡œ").replace(/ë¥¼/g, "ì„").replace(/ê³¼/g, "ì™€");
    }

    function startPractice() {
        currentSentences = ALL_SETS[document.getElementById('set-selector').value];
        currentIndex = 0; speeds = []; backspaceCount = 0;
        quizOverlay.style.display = 'none'; isQuizMode = false;
        inputEl.disabled = false; loadSentence();
        
        inputEl.placeholder = "ìœ„ ë¬¸ì¥ì„ ë³´ê³  ì…ë ¥í•˜ì„¸ìš”";
        inputEl.focus();
    }

    function loadSentence() {
        if (currentIndex < 10) {
            displayEl.innerText = currentSentences[currentIndex].s;
            inputEl.value = ""; lineStartTime = null;
            document.getElementById('stat-progress').innerText = `[ì—°ìŠµ ì¤‘: ${currentIndex+1}/10]`;
            inputEl.focus();
        } else { startQuizMode(); }
    }

    inputEl.addEventListener('keydown', (e) => { 
        if (!lineStartTime && e.key !== "Enter") lineStartTime = Date.now(); 
        if (e.key === "Backspace") backspaceCount++;
    });

    inputEl.addEventListener('keypress', (e) => {
        if (e.key === "Enter") {
            const entered = inputEl.value;
            // [ìˆ˜ì •ë¨] íŠ¹ìˆ˜ë¬¸ì/ê³µë°± ë¬´ì‹œí•˜ê³  ê¸€ìë§Œ ë¹„êµ
            if (cleanText(currentSentences[currentIndex].s) !== cleanText(entered)) {
                alert("ì˜¤íƒ€ê°€ ìˆìŠµë‹ˆë‹¤!"); inputEl.value = ""; return;
            }
            const sec = (Date.now() - lineStartTime) / 1000;
            speeds.push((cleanText(entered).length / sec) * 60);
            currentIndex++; loadSentence();
        }
    });

    function startQuizMode() {
        isQuizMode = true; quizIndex = 0; totalAbbrChars = 0; correctAbbrChars = 0;
        currentSentences.forEach(item => totalAbbrChars += normalizeForQuiz(item.a).length);
        quizOverlay.style.display = 'flex'; loadQuizQuestion();
    }

    function loadQuizQuestion() {
        if (quizIndex < 10) {
            document.getElementById('quiz-count').innerText = `${quizIndex + 1}/10`;
            document.getElementById('quiz-sentence').innerText = currentSentences[quizIndex].s;
            quizInput.value = ""; quizInput.disabled = false;
            document.getElementById('quiz-feedback').style.visibility = 'hidden';
            quizInput.focus();
        } else { finishAll(); }
    }

    quizInput.addEventListener('keypress', (e) => {
        if (e.key === "Enter" && !quizInput.disabled) {
            const correctRaw = currentSentences[quizIndex].a;
            const userRaw = quizInput.value;
            const normCorrect = normalizeForQuiz(correctRaw);
            const normUser = normalizeForQuiz(userRaw);
            const feedback = document.getElementById('quiz-feedback');
            const statusText = document.getElementById('status-text');

            feedback.style.visibility = 'visible';
            quizInput.disabled = true;

            if (normCorrect === normUser) {
                correctAbbrChars += normCorrect.length;
                statusText.innerText = "â— ì •ë‹µì…ë‹ˆë‹¤!";
                statusText.style.color = "var(--success)";
                document.getElementById('user-diff-display').innerHTML = "";
                document.getElementById('quiz-correct-ans').innerText = "";
                setTimeout(() => { quizIndex++; loadQuizQuestion(); }, 1000);
            } else {
                statusText.innerText = "X ì˜¤ë‹µì…ë‹ˆë‹¤";
                statusText.style.color = "var(--danger)";
                let matches = 0;
                for(let i=0; i<Math.min(normCorrect.length, normUser.length); i++) {
                    if(normCorrect[i] === normUser[i]) matches++;
                }
                correctAbbrChars += matches;
                showWrongFeedback(userRaw, correctRaw);
                setTimeout(() => { quizIndex++; loadQuizQuestion(); }, 2500);
            }
        }
    });

    function showWrongFeedback(user, correct) {
        const userDiffArea = document.getElementById('user-diff-display');
        const correctArea = document.getElementById('quiz-correct-ans');
        let diffHtml = "ë‚˜ì˜ ì…ë ¥: ";
        for (let i = 0; i < user.length; i++) {
            if (!correct.includes(user[i])) diffHtml += `<span class="wrong">${user[i]}</span>`;
            else diffHtml += `<span>${user[i]}</span>`;
        }
        userDiffArea.innerHTML = diffHtml;
        correctArea.innerText = `ì •ë‹µ: ${correct}`;
    }

    function finishAll() {
        quizOverlay.style.display = 'none';
        const avgCpm = speeds.reduce((a, b) => a + b, 0) / 10;
        const finalRatio = correctAbbrChars / totalAbbrChars;
        const passed = (avgCpm >= 70 && finalRatio >= 0.90);

        alert(`[ì‹œí—˜ ê²°ê³¼]\ní‰ê·  ì†ë„: ${avgCpm.toFixed(1)} CPM\nì•½ì–´ ì •í™•ë„: ${(finalRatio*100).toFixed(1)}%\në°±ìŠ¤í˜ì´ìŠ¤: ${backspaceCount}íšŒ\nê²°ê³¼: ${passed ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}`);
        const row = `<tr><td>${document.getElementById('set-selector').value}</td><td>${avgCpm.toFixed(1)}</td><td>${(finalRatio*100).toFixed(1)}%</td><td><span style="color:${passed?'var(--success)':'var(--danger)'}; font-weight:bold;">${passed?'í•©ê²©':'ë¶ˆí•©ê²©'}</span></td></tr>`;
        document.querySelector('#result-table tbody').innerHTML = row + document.querySelector('#result-table tbody').innerHTML;
        
        document.getElementById('history-section').style.display = 'block';
    }

    function toggleHistory() {
        const s = document.getElementById('history-section');
        s.style.display = s.style.display === 'block' ? 'none' : 'block';
    }
    
    function logout() { 
        if(confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { sessionStorage.clear(); location.href = 'index.html'; } 
    }
</script>
</body>
</html>
