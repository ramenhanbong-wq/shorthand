<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>λ‹¨λ¬Έμ—°μµ v1 β€” μ…λ¬Έ μ΅Έμ—… μ‹ν— (μµμΆ…λ³Έ)</title>
    <style>
        :root {
            --bg: #f6f7fb; --surface: #ffffff; --border: #e5e7eb;
            --text: #111827; --muted: #6b7280; --accent: #2563eb;
            --header-bg: #111827; --header-fg: #ffffff; --danger: #ef4444; --success: #10b981;
        }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        header { background-color: var(--header-bg); color: var(--header-fg); padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; }
        main { flex: 1; padding: 30px; max-width: 900px; margin: 0 auto; width: 100%; box-sizing: border-box; position: relative; overflow-y: auto; }
        .card { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .hint-label { color: var(--muted); font-size: 0.85rem; margin-bottom: 10px; display: block; }
        #text-display { font-size: 1.5rem; font-weight: 500; min-height: 60px; padding: 15px; background: #f9fafb; border-radius: 6px; border: 1px solid var(--border); margin-bottom: 5px; word-break: keep-all; }
        input[type="text"] { width: 100%; padding: 15px; font-size: 1.5rem; border: 2px solid var(--border); border-radius: 6px; box-sizing: border-box; outline: none; }
        input[type="text"]:focus { border-color: var(--accent); }
        
        #quiz-overlay {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98); z-index: 100; flex-direction: column; align-items: center; justify-content: center; padding: 40px; text-align: center;
        }
        #quiz-sentence { font-size: 1.4rem; color: #4b5563; margin-bottom: 10px; }
        #quiz-feedback { margin-top: 15px; min-height: 120px; visibility: hidden; width: 100%; }
        .status-msg { font-size: 1.8rem; font-weight: 900; margin-bottom: 10px; }
        .diff-text { font-size: 1.3rem; margin: 5px 0; }
        .wrong { color: var(--danger); text-decoration: line-through; font-weight: bold; }
        .correct-info { color: var(--success); font-weight: bold; font-size: 1.5rem; margin-top: 10px; }
        
        #history-section { display: none; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid var(--border); padding: 10px; text-align: center; }
        .toolbar { display: flex; gap: 10px; margin-top: 10px; }
        button, select { padding: 10px 15px; border-radius: 6px; border: 1px solid var(--border); cursor: pointer; font-weight: bold; }
        .btn-accent { background: var(--accent); color: white; border: none; }

        /* λ¨λ°”μΌ λ°μ‘ν• λ””μμΈ */
        @media (max-width: 768px) {
            header { padding: 10px 15px; font-size: 0.8rem; }
            main { padding: 15px; }
            #text-display { font-size: 1.2rem; min-height: 50px; padding: 12px; }
            input[type="text"] { font-size: 1.2rem; padding: 12px; }
            #quiz-overlay { padding: 20px; }
            #quiz-sentence { font-size: 1.1rem; }
            .status-msg { font-size: 1.5rem; }
            .toolbar { flex-wrap: wrap; }
            .toolbar select, .toolbar button { flex: 1 1 calc(50% - 10px); font-size: 0.9rem; }
        }
    </style>
</head>
<body>

<header>
    <div><h1 style="font-size: 1.2rem; margin:0;">λ‹¨λ¬Έμ—°μµ v1 β€” μ…λ¬Έ μ΅Έμ—… μ‹ν—</h1></div>
    <div id="stat-progress" style="font-size: 0.9rem;">[μ„ΈνΈλ¥Ό μ„ νƒν•μ„Έμ”]</div>
</header>

<main>
    <div id="quiz-overlay">
        <h2>π’ μ•½μ–΄ μ •λ°€ ν€΄μ¦ (<span id="quiz-count">1/10</span>)</h2>
        <p style="color:var(--muted); font-size: 0.9rem;">μ•½μ–΄λ¥Ό μ…λ ¥ν•μ„Έμ” (λ„μ–΄μ“°κΈ° λ¬΄κ΄€, λ¬Έμ¥λ¶€νΈ ν¬ν•¨)</p>
        <p id="quiz-sentence"></p>
        <input type="text" id="quiz-input" placeholder="μ•½μ–΄ μ •λ‹µ μ…λ ¥..." autocomplete="off">
        <div id="quiz-feedback">
            <div id="status-text" class="status-msg"></div>
            <div class="diff-text" id="user-diff-display"></div>
            <div class="correct-info" id="quiz-correct-ans"></div>
        </div>
    </div>

    <div class="card">
        <span class="hint-label">μ—°μµ λ¬Έμ¥</span>
        <div id="text-display">μ„ΈνΈλ¥Ό μ„ νƒν•κ³  μ—°μµ μ‹μ‘μ„ λλ¬μ£Όμ„Έμ”.</div>
    </div>
    <div class="card">
        <span class="hint-label">μ…λ ¥ (Enterλ¥Ό λ„λ¥΄λ©΄ μ μ¶)</span>
        <input type="text" id="typing-input" disabled autocomplete="off">
    </div>
    <div class="toolbar">
        <select id="set-selector">
            <option value="1">μ  1μ„ΈνΈ</option><option value="2">μ  2μ„ΈνΈ</option><option value="3">μ  3μ„ΈνΈ</option>
            <option value="4">μ  4μ„ΈνΈ</option><option value="5">μ  5μ„ΈνΈ</option><option value="6">μ  6μ„ΈνΈ</option>
            <option value="7">μ  7μ„ΈνΈ</option><option value="8">μ  8μ„ΈνΈ</option><option value="9">μ  9μ„ΈνΈ</option>
        </select>
        <button onclick="startPractice()">μ—°μµ μ‹μ‘</button>
        <button class="btn-accent" onclick="toggleHistory()">κ²°κ³Ό λ³΄κΈ°</button>
    </div>
    <div id="history-section" class="card">
        <table id="result-table"><thead><tr><th>μ„ΈνΈ</th><th>ν‰κ· μ†λ„</th><th>μ•½μ–΄μ •ν™•λ„</th><th>μµμΆ…κ²°κ³Ό</th></tr></thead><tbody></tbody></table>
    </div>
</main>

<script>
    const ALL_SETS = {
        "1": [ {s:"μ‚¬νλ” ν•λ‚μ λ°°μ™€ κ°™μ€ κ²ƒμ΄λ‹¤.", a:"νλ” μ μ™€ κ°™μ€ κ²ƒμ΄λ‹¤."}, {s:"μ΄ μ„Έμƒμ— μ•…μ΄ μ—†λ‹¤λ©΄ μ„ λ„ μ—†μ„ κ²ƒμ΄λ‹¤.", a:"μ— μ΄ μ—†λ‹¤λ©΄ λ„ μ—†μ„ κ²ƒμ΄λ‹¤."}, {s:"λμ—μ„ λ©€μ–΄μ§€λ©΄ λ§μμ—μ„ λ©€μ–΄μ§„λ‹¤.", a:"μ—μ„ μ§€λ©΄ μ—μ„ μ§„λ‹¤."}, {s:"μ°λ¦¬λ” λ¶€μ •λ¶€ν¨ μ²™κ²°μ— λ‚μ„κ³  μμµλ‹λ‹¤.", a:"λ¦¬λ” μ— κ³  μμµλ‹λ‹¤."}, {s:"μ°λ¦¬λ” μ‹μΈν•μ§€ μ•μ„ μ μ—†μµλ‹λ‹¤.", a:"λ¦¬λ” ν•μ§€ μ•μ„ μ μ—†μµλ‹λ‹¤."}, {s:"μ–Όκµ΄μ€ κ²°μ½” κ±°μ§“λ§μ„ ν•μ§€ μ•λ”λ‹¤.", a:"μ€ μ„ ν•μ§€ μ•λ”λ‹¤."}, {s:"μƒλ΅μ΄ μ„Έκ³„λ¥Ό μ°½μ΅°ν•΄λ‚΄κ³  μμµλ‹λ‹¤.", a:"λ¥Ό κ³  μμµλ‹λ‹¤."}, {s:"μ„κΈ°λ¥Ό λ§κ³  μλ” κ²ƒμ€ μ°λ¦¬ λ―Όμ£Όμ£Όμμ…λ‹λ‹¤.", a:"λ¥Ό κ³  μλ” κ²ƒμ€ μ…λ‹λ‹¤."}, {s:"λ„λ•μ  μΉλ¦¬λ” μ…μ„ ν•μ§€ μ•λ” κ²ƒμ΄λ‹¤.", a:"λ¦¬λ” μ„ ν•μ§€ μ•λ” κ²ƒμ΄λ‹¤."}, {s:"ν¬λ§μ΄ μ—†λ‹¤λ©΄ μ•„λ¬΄κ²ƒλ„ μ„±κ³µν•μ§€ λ»ν•λ‹¤.", a:"μ΄ μ—†λ‹¤λ©΄ κ²ƒλ„ ν•μ§€ ν•λ‹¤."} ],
        "2": [ {s:"μ‚¬λ‘μ€ μ•„λ‚μ—†μ΄ λΊλ” κ²ƒμ΄λ‹¤.", a:"μ€ μ—†μ΄ λ” κ²ƒμ΄λ‹¤."}, {s:"μ°λ¦¬κ°€ κ±΄μ„¤ν•κ³ μ ν•λ” κµ­κ°€μ…λ‹λ‹¤.", a:"κ°€ ν•κ³ μ ν•λ” μ…λ‹λ‹¤."}, {s:"λ”λ¶μ–΄ μ†μ΅κ³  μ‚¬λ” μ‚¬νλ¥Ό κ±΄μ„¤ν•λ” μΌμ…λ‹λ‹¤.", a:"κ³  μ‚¬λ” λ¥Ό ν•λ” μ…λ‹λ‹¤."}, {s:"μƒλ΅μ΄ μ„Έκ³„μ§μ„κ°€ λ¨μƒ‰λκ³  μμµλ‹λ‹¤.", a:"κ°€ λκ³  μμµλ‹λ‹¤."}, {s:"λ¬΄μ—‡λ³΄λ‹¤ μΈκ°„μ„±μ„ νλ³µν•΄μ•Ό ν•©λ‹λ‹¤.", a:"μ„ ν•©λ‹λ‹¤."}, {s:"κµ­κ°€μ™€ λ―Όμ΅±μ„ μ„ν•΄ μ°λ¦¬ ν•¨κ» λ…Έλ ¥ν•΄μ•Ό ν•©λ‹λ‹¤.", a:"μ™€ μ„ ν•©λ‹λ‹¤."}, {s:"ν•κµ­μ€ μμ¤€ λ†’μ€ λ―Όμ£Όμ •μΉλ¥Ό μ‹¤ν„ν–μµλ‹λ‹¤.", a:"μ€ μ€ λ¥Ό ν–μµλ‹λ‹¤."}, {s:"μ—λ„μ§€ μ μ•½ν•λ” κΈΈλ°–μ— μ—†μµλ‹λ‹¤.", a:"ν•λ” μ— μ—†μµλ‹λ‹¤."}, {s:"λ€ν†µλ Ή μ„ κ±°κ°€ λμ•μ— λ‹¤κ°€μ™”μµλ‹λ‹¤.", a:"κ°€ μ— μµλ‹λ‹¤."}, {s:"μƒλ΅μ΄ μ‚¬κ³ λ¥Ό μ”κµ¬ν•κ³  μμµλ‹λ‹¤.", a:"λ¥Ό ν•κ³  μμµλ‹λ‹¤."} ],
        "3": [ {s:"μμ¶μμ•μ νμƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤.", a:"μ μ΄ ν•©λ‹λ‹¤."}, {s:"λ‚λΌμ μ¤‘μ‹¬μ€ μ¤‘μ†κΈ°μ—…μ…λ‹λ‹¤.", a:"μ μ€ μ…λ‹λ‹¤."}, {s:"μ°λ¦¬μ™€ ν•¨κ» ν‰ν™”ν†µμΌλ΅ κ°€λ” κ²ƒμ…λ‹λ‹¤.", a:"μ™€ λ΅ κ°€λ” κ²ƒμ…λ‹λ‹¤."}, {s:"μƒλ΅μ΄ κµ­μ μ§μ„κ°€ ν•μ„±λκ³  μμµλ‹λ‹¤.", a:"κ°€ λκ³  μμµλ‹λ‹¤."}, {s:"μ—¬λ¬λ¶„μ„ μλ‘μ¤λ½κ² μƒκ°ν•κ³  μμµλ‹λ‹¤.", a:"μ„ κ² ν•κ³  μμµλ‹λ‹¤."}, {s:"μ§€μ›κ³Ό ν‘λ ¥μ„ μ•„λΌμ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤.", a:"κ³Ό μ„ μ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤."}, {s:"κ³ μ„κ³µμ§μλ“¤μ΄ μ¬μ‚°μ„ κ³µκ°ν–μµλ‹λ‹¤.", a:"μ΄ μ„ ν–μµλ‹λ‹¤."}, {s:"μ°λ¦¬λ” λ”λ¶μ–΄ μ‚¬λ” κ³µλ™μ²΄μ…λ‹λ‹¤.", a:"λ¦¬λ” μ‚¬λ” μ…λ‹λ‹¤."}, {s:"κ³ λ‚ μ†μ—μ„ μΆμ ν•μ§€ μ•μ•μµλ‹λ‹¤.", a:"μ—μ„ ν•μ§€ μ•μ•μµλ‹λ‹¤."}, {s:"μ°λ¦¬λ” λ©λ„ν•κ³  μμ§€ μ•μµλ‹κΉ?", a:"λ¦¬λ” ν•κ³  μ μ§€ μ•μµλ‹κΉ?"} ],
        "4": [ {s:"μ—¬μμ—κ² κ°€μ¥ μ—„κ²©ν• κ²ƒμ€ μ—¬μμ΄λ‹¤.", a:"μ—κ² ν• κ²ƒμ€ μ΄λ‹¤."}, {s:"μ‹λ ¨μ„ κ·Ήλ³µν•  μ μμ—μµλ‹λ‹¤.", a:"μ„ ν•  μ μμ—μµλ‹λ‹¤."}, {s:"κµ­λ―Όμ—κ² κ·Έκ²ƒμ„ νΈμ†ν•  μ μμµλ‹λ‹¤.", a:"μ—κ² μ„ ν•  μ μμµλ‹λ‹¤."}, {s:"λ‹¤μμ€ λ…Έμ‚¬λ¬Έμ μ— λ€ν•΄ λ¬»κ² μµλ‹λ‹¤.", a:"μ€ μ— μµλ‹λ‹¤."}, {s:"λ€λΉ„λ¥Ό νΌνΌν ν•μ§€ μ•μ„ μ μ—†λ‹¤.", a:"λ¥Ό ν•μ§€ μ•μ„ μ μ—†λ‹¤."}, {s:"κ·Έκ²ƒμ€ λ‚λΌ λ°”λ΅ μ„Έμ°κΈ°μΈ κ²ƒμ…λ‹λ‹¤.", a:"μ€ λ΅ κ²ƒμ…λ‹λ‹¤."}, {s:"μ°λ¦¬ κµ­λ―Όμ€ μμ‹ κ°μ„ κ°€μ Έμ•Ό ν•©λ‹λ‹¤.", a:"μ€ μ„ ν•©λ‹λ‹¤."}, {s:"μ‚¬νλ” κ±°λ€ν™”λ μ •λ³΄μ²΄κ³„λ¥Ό μ΄λ£¬λ‹¤.", a:"νλ” λ¥Ό λ£¬λ‹¤."}, {s:"λ¶λ°©μ •μ±…μ„ μ κ·Ήμ μΌλ΅ μ¶”μ§„ν•΄μ•Ό ν•λ‹¤.", a:"μ„ μ μΌλ΅ ν•λ‹¤."}, {s:"μ°λ¦¬λ” μ§€κΈ κ°•λ ¥ν• μ •λ¶€λ¥Ό μ• μ¨ μ΄λ£©ν–λ‹¤.", a:"λ¦¬λ” ν• λ¥Ό ν–λ‹¤."} ],
        "5": [ {s:"κµ­νλ” λ―Όμ£Όμ£Όμμ μ „λ‹ΉμΈ κ²ƒμ…λ‹λ‹¤.", a:"νλ” μ κ²ƒμ…λ‹λ‹¤."}, {s:"μ–΄λ¦°μ΄ μ‚¬λ‘μ€ λ‚λΌ μ‚¬λ‘μ…λ‹λ‹¤.", a:"μ€ μ…λ‹λ‹¤."}, {s:"κΉ¨μ–΄ μλ‹¤λ” κ²ƒμ€ μ‚΄μ•„ μλ‹¤λ” κ²ƒμ΄λ‹¤.", a:"μλ‹¤λ” κ²ƒμ€ μλ‹¤λ” κ²ƒμ΄λ‹¤."}, {s:"μ„λ€ν• μ‚¬λμ€ μ„λ€ν• μ‚¬λ‘μ„ ν•λ‹¤.", a:"ν• μ€ ν• μ„ ν•λ‹¤."}, {s:"κµ­λ―Ό λ¨λ‘μ μλ°μ μΈ μ°Έμ—¬κ°€ ν•„μ”ν•©λ‹λ‹¤.", a:"μ μ μΈ κ°€ ν•©λ‹λ‹¤."}, {s:"λ†’μ€ λ„λ•μ„±μ΄ μ¤‘μ‹λμ–΄μ•Ό ν•  κ²ƒμ…λ‹λ‹¤.", a:"μ€ μ΄ λμ–΄μ•Ό κ²ƒμ…λ‹λ‹¤."}, {s:"ν•μ‹μ μΈ μ§€μ μΌλ΅ κ·ΈμΉλ” κ²½μ°κ°€ λ§λ‹¤.", a:"μ μΈ μΌλ΅ μΉλ” κ°€ λ§λ‹¤."}, {s:"λ‚΄μΌμ„ ν–¥ν• μ΄μ •ν‘μ΄κΈ°λ„ ν•©λ‹λ‹¤.", a:"μ„ ν• λ„ ν•©λ‹λ‹¤."}, {s:"μ•„μ‹μ•„ νƒν‰μ–‘ μ‹λ€λ” μ €μ λ΅ μ¤μ§€ μ•μµλ‹λ‹¤.", a:"λ€λ” λ΅ μ§€ μ•μµλ‹λ‹¤."}, {s:"ν™κ²½μ€ μΈκ°„μ΄ μƒμ΅΄ν•λ” λ°”νƒ•μ…λ‹λ‹¤.", a:"μ€ μ΄ ν•λ” μ…λ‹λ‹¤."} ],
        "6": [ {s:"λ¨λ‘μ νμ„ λ¨μ•„ ν’μ”λ΅μ΄ μ‚¬νλ¥Ό λ§λ“­μ‹λ‹¤.", a:"μ μ„ λ¥Ό λ‹¤."}, {s:"λ²•κ³Ό λ„λ•μ μ¤‘μ”μ„±μ„ μ¬μΈμ‹ν•΄μ•Ό ν•©λ‹λ‹¤.", a:"κ³Ό μ μ„ ν•©λ‹λ‹¤."}, {s:"κ²½μ λ ¥λ§μΌλ΅ μ„ μ§„κµ­μ΄ λ  μ μ—†μµλ‹λ‹¤.", a:"μΌλ΅ μ΄ λ  μ μ—†μµλ‹λ‹¤."}, {s:"ν•™κµμ μμ¨μ€ μµλ€ν• μ΅΄μ¤‘λμ–΄μ•Ό ν•λ‹¤.", a:"μ μ€ ν• λμ–΄μ•Ό ν•λ‹¤."}, {s:"μƒλ΅μ΄ μ‹λ€ μ—΄μ–΄κ°€μ•Ό ν•λ‹¤κ³  λ΄…λ‹λ‹¤.", a:"λ‹¤κ³  λ΄…λ‹λ‹¤."}, {s:"μ •λ¶€λ” μ•μ •κ³Ό νΈμλ¥Ό λ„λ¨ν•κ³  μμµλ‹λ‹¤.", a:"λ¶€λ” κ³Ό λ¥Ό ν•κ³  μμµλ‹λ‹¤."}, {s:"ν¬κ² κΈ°μ—¬ν•λ” λ‚λΌλ¥Ό λ§λ“¤κ³ μ ν•©λ‹λ‹¤.", a:"κ² ν•λ” λ¥Ό κ³ μ ν•©λ‹λ‹¤."}, {s:"μ΄κ²ƒμ΄ λ―Έλλ΅ λ‚μ•„κ°€λ” ν•κµ­μ μ΄μ•ΌκΈ°μ…λ‹λ‹¤.", a:"μ΄ λ΅ κ°€λ” μ μ…λ‹λ‹¤."}, {s:"μ°λ¦¬ λ‘ λ‚λΌλ” κ°€μ¥ κ°€κΉμ΄ λ²—μ΄ λμ—μµλ‹λ‹¤.", a:"λΌλ” μ΄ λμ—μµλ‹λ‹¤."}, {s:"λ―Έλλ¥Ό μ΄λμ–΄κ°€λ” μ§€λ„μκ°€ λ  κ²ƒμ…λ‹λ‹¤.", a:"λ¥Ό κ°€λ” κ°€ κ²ƒμ…λ‹λ‹¤."} ],
        "7": [ {s:"κ°νμ€ λ―Όμ΅±μ μƒμ΅΄μ„ μ„ν•΄ ν”Όν•  μ μ—†μµλ‹λ‹¤.", a:"μ€ μ μ„ ν•  μ μ—†μµλ‹λ‹¤."}, {s:"κ²½μλ ¥μ„ λ†’μ΄κΈ°μ— μ•μ¥μ„ μ£Όμ‹κΈ° λ°”λλ‹λ‹¤.", a:"μ„ μ— λλ‹λ‹¤."}, {s:"μ°λ¦¬λ” λ•λ•λ΅ μ—­κ²½μ„ κ²κ² λλ‹¤.", a:"λ¦¬λ” λ΅ μ„ κ² λλ‹¤."}, {s:"ν•κµ­μ μ„±κ³µμ€ λ¬΄μ—‡λ³΄λ‹¤λ„ ν‰ν™”μ κ²°μ‹¤μ…λ‹λ‹¤.", a:"μ μ€ λ„ μ μ…λ‹λ‹¤."}, {s:"μ•μΌλ΅ λ³΄λ‹¤ κ°•λ ¥ν• λ™λ°μκ°€ λ  κ²ƒμ…λ‹λ‹¤.", a:"μΌλ΅ ν• κ°€ κ²ƒμ…λ‹λ‹¤."}, {s:"κ°κµ­μ κ³µλ™λ…Έλ ¥κ³Ό ν‘λ ¥μ΄ ν•„μ”ν•©λ‹λ‹¤.", a:"μ κ³Ό μ΄ ν•©λ‹λ‹¤."}, {s:"λ¨λ“  λ¬Έμ λ¥Ό λ¶„λ…ν μΈμ‹ν•μ€μµλ‹λ‹¤.", a:"λ¥Ό ν•μ€μµλ‹λ‹¤."}, {s:"κµ­κ°€μ™€ λ―Όμ΅±μ„ μ„ν•΄ λ‹¤ ν•¨κ» λμ‹λ‹¤.", a:"μ™€ μ„ λ‹¤."}, {s:"ν•λ°λ„ μ—­μ‚¬μ λ°μ „μ„ κ°€λ΅λ§‰κ³  μμµλ‹λ‹¤.", a:"μ μ„ κ³  μμµλ‹λ‹¤."}, {s:"κ·Έ μ–΄λ λ•λ³΄λ‹¤ λ°”μ‚ μ›€μ§μ—¬μ•Ό ν–μµλ‹λ‹¤.", a:"ν–μµλ‹λ‹¤."} ],
        "8": [ {s:"μ •λ¶€μ μμ‚°μ„ κΉ¨λ—ν•κ³  λ°”λ¥΄κ² μ¨μ•Ό ν•λ‹¤.", a:"μ μ„ ν•κ³  λ¥΄κ² ν•λ‹¤."}, {s:"μ¤‘μ†κΈ°μ—…μ ν¬μκ°€ ν™κΈ°λ¥Ό λ κ³  μμµλ‹λ‹¤.", a:"μ κ°€ λ¥Ό κ³  μμµλ‹λ‹¤."}, {s:"μ΄μ  μ—¬λ¬λ¶„λ„ ν”Όλ¶€λ΅ λλ‚„ κ²ƒμ…λ‹λ‹¤.", a:"λ„ λ΅ κ²ƒμ…λ‹λ‹¤."}, {s:"μ„Έκ³„κ°€ ν•λ‚μ κ³µλ™μ²΄κ°€ λμ—μµλ‹λ‹¤.", a:"κ°€ μ κ°€ λμ—μµλ‹λ‹¤."}, {s:"λ°λ“μ‹ λ‚¨κ³Ό λ¶μ€ ν†µμΌμ΄ λμ–΄μ•Ό ν•©λ‹λ‹¤.", a:"κ³Ό μ€ μ΄ λμ–΄μ•Ό ν•©λ‹λ‹¤."}, {s:"μ•„μ‹μ•„μ—λ” ν•κµ­μ΄ λ²„ν‹°κ³  μλ‹¤.", a:"μ—λ” μ΄ κ³  μλ‹¤."}, {s:"λ²„λ ¤μ§„ μ„¬λ§λ‹¤ κ½ƒμ΄ ν”Όμ—λ‹¤.", a:"μ΄ μ—λ‹¤."}, {s:"λ‘ λ‚λΌ κµ­λ―Όμ—κ² μλ―Έ μλ” λ‚ μ…λ‹λ‹¤.", a:"μ—κ² μλ” μ…λ‹λ‹¤."}, {s:"ν•¨κ» λ‹¬λ ¤μ¨ μ¥μ •μ„ λ³΄λλκ² μƒκ°ν•©λ‹λ‹¤.", a:"μ„ λκ² ν•©λ‹λ‹¤."}, {s:"ν•λ°λ„ μ •μ„Έλ” μ•„μ§ λƒ‰μ „ μƒνƒμ…λ‹λ‹¤.", a:"μ„Έλ” μ…λ‹λ‹¤."} ],
        "9": [ {s:"μλ―Έ μλ” ν• λ‹¬μ„ λ³΄λ‚΄μ•Ό ν•κ² μµλ‹λ‹¤.", a:"μλ” μ„ μµλ‹λ‹¤."}, {s:"μ°λ¦¬μ κµ­μ μ  μ„μƒμ„ μ‹¤κ°ν•  μ μμ—μµλ‹λ‹¤.", a:"μ μ  μ„ ν•  μ μμ—μµλ‹λ‹¤."}, {s:"μ°λ¦¬ λ¨λ‘κ°€ λ‹¤ μμ›…μ΄ λ  μ μ—†λ‹¤.", a:"κ°€ μ΄ λ  μ μ—†λ‹¤."}, {s:"λ‚΄ μ‚¬λ‘μ€ μƒλ…μ κ½ƒμ΄λ‹¤.", a:"μ€ μ μ΄λ‹¤."}, {s:"λΉκ³¤μ€ μ¬μ•™μ΄ μ•„λ‹λΌ λ¶νΈμ΄λ‹¤.", a:"μ€ μ΄ μ΄λ‹¤."}, {s:"κ²°νΌμ€ μ‚¬λ‘μ λ¬΄λ¤μ΄ μ•„λ‹™λ‹λ‹¤.", a:"μ€ μ μ΄ λ‹™λ‹λ‹¤."}, {s:"λμ•„λ³Έ κ³Όκ±°μ μ‚¶μ€ μκ°„λ“¤μ μ—°μ†μ΄λ‹¤.", a:"μ μ€ μ μ΄λ‹¤."}, {s:"μ κ·Ή κ²€ν† ν•μ—¬ μ΄λ£¨μ–΄μ§ μ μλ„λ΅ λ…Έλ ¥ν•κ² μµλ‹λ‹¤.", a:"ν•μ—¬ μ§ μ μλ„λ΅ μµλ‹λ‹¤."}, {s:"μ΅μ•„ν΄μ§ μλ¬΄ν™”λ¥Ό λ°λ“μ‹ μ„±μ‚¬μ‹ν‚¤κ² μµλ‹λ‹¤.", a:"λ¥Ό μµλ‹λ‹¤."}, {s:"ν•κΊΌλ²μ— μ λ„μ  μ¥μΉλ¥Ό λ§λ ¨ν•  μλ” μ—†μµλ‹κΉ?", a:"μ— μ  λ¥Ό ν•  μ λ” μ—†μµλ‹κΉ?"} ]
    };

    let currentIndex = 0, currentSentences = [], lineStartTime = null, speeds = [];
    let isQuizMode = false, quizIndex = 0, totalAbbrChars = 0, correctAbbrChars = 0;
    let backspaceCount = 0;

    const inputEl = document.getElementById('typing-input'), displayEl = document.getElementById('text-display');
    const quizOverlay = document.getElementById('quiz-overlay'), quizInput = document.getElementById('quiz-input');

    function normalizeForQuiz(s) {
        if (!s) return "";
        return s.replace(/\s/g, "").replace(/μΌλ΅λ”/g, "λ―€λ΅").replace(/λ¥Ό/g, "μ„").replace(/κ³Ό/g, "μ™€");
    }

    function startPractice() {
        currentSentences = ALL_SETS[document.getElementById('set-selector').value];
        currentIndex = 0; speeds = []; backspaceCount = 0;
        quizOverlay.style.display = 'none'; isQuizMode = false;
        inputEl.disabled = false; loadSentence();
    }

    function loadSentence() {
        if (currentIndex < 10) {
            displayEl.innerText = currentSentences[currentIndex].s;
            inputEl.value = ""; lineStartTime = null;
            document.getElementById('stat-progress').innerText = `[μ—°μµ μ¤‘: ${currentIndex+1}/10]`;
            inputEl.focus();
            inputEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else { startQuizMode(); }
    }

    inputEl.addEventListener('keydown', (e) => { 
        if (!lineStartTime && e.key !== "Enter") lineStartTime = Date.now(); 
        if (e.key === "Backspace") backspaceCount++;
    });

    inputEl.addEventListener('input', () => {
        if (!lineStartTime) return;
        const now = Date.now();
        const sec = (now - lineStartTime) / 1000;
        const currentLen = inputEl.value.replace(/\s/g, "").length;
        const currentCpm = sec > 0 ? (currentLen / sec) * 60 : 0;
        document.getElementById('stat-progress').innerText = `[μ—°μµ μ¤‘: ${currentIndex+1}/10] | μ‹¤μ‹κ°„: ${Math.floor(currentCpm)} CPM | BS: ${backspaceCount}`;
    });

    inputEl.addEventListener('keypress', (e) => {
        if (e.key === "Enter") {
            const entered = inputEl.value;
            if (currentSentences[currentIndex].s.replace(/\s/g, "") !== entered.replace(/\s/g, "")) {
                alert("μ¤νƒ€κ°€ μμµλ‹λ‹¤!"); inputEl.value = ""; return;
            }
            const sec = (Date.now() - lineStartTime) / 1000;
            speeds.push((entered.replace(/\s/g, "").length / sec) * 60);
            currentIndex++; loadSentence();
        }
    });

    function startQuizMode() {
        isQuizMode = true; quizIndex = 0; totalAbbrChars = 0; correctAbbrChars = 0;
        currentSentences.forEach(item => totalAbbrChars += normalizeForQuiz(item.a).length);
        quizOverlay.style.display = 'flex'; loadQuizQuestion();
    }

    function loadQuizQuestion() {
        if (quizIndex < 10) {
            document.getElementById('quiz-count').innerText = `${quizIndex + 1}/10`;
            document.getElementById('quiz-sentence').innerText = currentSentences[quizIndex].s;
            quizInput.value = ""; quizInput.disabled = false;
            document.getElementById('quiz-feedback').style.visibility = 'hidden';
            quizInput.focus();
            quizInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else { finishAll(); }
    }

    quizInput.addEventListener('keypress', (e) => {
        if (e.key === "Enter" && !quizInput.disabled) {
            const correctRaw = currentSentences[quizIndex].a;
            const userRaw = quizInput.value;
            const normCorrect = normalizeForQuiz(correctRaw);
            const normUser = normalizeForQuiz(userRaw);
            const feedback = document.getElementById('quiz-feedback');
            const statusText = document.getElementById('status-text');

            feedback.style.visibility = 'visible';
            quizInput.disabled = true;

            if (normCorrect === normUser) {
                correctAbbrChars += normCorrect.length;
                statusText.innerText = "β— μ •λ‹µμ…λ‹λ‹¤!";
                statusText.style.color = "var(--success)";
                document.getElementById('user-diff-display').innerHTML = "";
                document.getElementById('quiz-correct-ans').innerText = "";
                setTimeout(() => { quizIndex++; loadQuizQuestion(); }, 1000);
            } else {
                statusText.innerText = "X μ¤λ‹µμ…λ‹λ‹¤";
                statusText.style.color = "var(--danger)";
                let matches = 0;
                for(let i=0; i<Math.min(normCorrect.length, normUser.length); i++) {
                    if(normCorrect[i] === normUser[i]) matches++;
                }
                correctAbbrChars += matches;
                showWrongFeedback(userRaw, correctRaw);
                setTimeout(() => { quizIndex++; loadQuizQuestion(); }, 2500);
            }
        }
    });

    function showWrongFeedback(user, correct) {
        const userDiffArea = document.getElementById('user-diff-display');
        const correctArea = document.getElementById('quiz-correct-ans');
        let diffHtml = "λ‚μ μ…λ ¥: ";
        for (let i = 0; i < user.length; i++) {
            if (!correct.includes(user[i])) diffHtml += `<span class="wrong">${user[i]}</span>`;
            else diffHtml += `<span>${user[i]}</span>`;
        }
        userDiffArea.innerHTML = diffHtml;
        correctArea.innerText = `μ •λ‹µ: ${correct}`;
    }

    function finishAll() {
        quizOverlay.style.display = 'none';
        const avgCpm = speeds.reduce((a, b) => a + b, 0) / 10;
        const finalRatio = correctAbbrChars / totalAbbrChars;
        const passed = (avgCpm >= 70 && finalRatio >= 0.90);

        alert(`[μ‹ν— κ²°κ³Ό]\nν‰κ·  μ†λ„: ${avgCpm.toFixed(1)} CPM\nμ•½μ–΄ μ •ν™•λ„: ${(finalRatio*100).toFixed(1)}%\nλ°±μ¤νμ΄μ¤: ${backspaceCount}ν\nκ²°κ³Ό: ${passed ? 'ν•©κ²©' : 'λ¶ν•©κ²©'}`);
        const row = `<tr><td>${document.getElementById('set-selector').value}</td><td>${avgCpm.toFixed(1)}</td><td>${(finalRatio*100).toFixed(1)}%</td><td>${passed?'ν•©κ²©':'λ¶ν•©κ²©'}</td></tr>`;
        document.querySelector('#result-table tbody').innerHTML = row + document.querySelector('#result-table tbody').innerHTML;
    }

    function toggleHistory() {
        const s = document.getElementById('history-section');
        s.style.display = s.style.display === 'block' ? 'none' : 'block';
    }
</script>
</body>
</html>