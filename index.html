<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHORTHAND MASTER :: Dashboard</title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        :root {
            --main-bg: #f5f7fa;
            --primary: #6c5e7f; /* ì°¨ë¶„í•œ í¼í”Œ ê·¸ë ˆì´ */
            --accent: #ff9a9e;  /* ê·€ì—¬ìš´ í•‘í¬ í¬ì¸íŠ¸ */
            --card-white: #ffffff;
            --text-main: #2d3436;
        }

        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--main-bg);
            margin: 0; padding: 0;
            color: var(--text-main);
            display: flex; flex-direction: column; align-items: center;
        }

        /* ë¡œê·¸ì¸ í™”ë©´ ìŠ¤íƒ€ì¼ */
        #login-screen { display: flex; justify-content: center; align-items: center; min-height: 100vh; width: 100%; }
        .login-box { 
            background: var(--card-white); padding: 50px; border-radius: 30px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.05); text-align: center; width: 320px;
        }
        .login-box h2 { color: var(--primary); margin-bottom: 30px; font-weight: 800; letter-spacing: -1px; }
        .login-box input { 
            width: 100%; padding: 15px; margin-bottom: 12px; border-radius: 12px; 
            border: 2px solid #eee; outline: none; transition: 0.3s; box-sizing: border-box;
        }
        .login-box input:focus { border-color: var(--primary); }
        .login-btn { 
            width: 100%; padding: 15px; background: var(--primary); color: white; 
            border: none; border-radius: 12px; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .login-btn:hover { background: #4a3f58; transform: scale(1.02); }

        /* ë©”ì¸ ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼ */
        #main-screen { display: none; width: 100%; max-width: 1000px; padding: 40px 20px; }
        
        header { 
            display: flex; justify-content: space-between; align-items: center; 
            margin-bottom: 25px; background: white; padding: 20px 30px; border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.03);
        }
        .welcome-txt { font-size: 1.1rem; font-weight: 700; color: var(--primary); }
        .logout-btn { 
            background: #ffeaa7; border: none; padding: 8px 18px; border-radius: 10px; 
            color: #d63031; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .logout-btn:hover { background: #fdcb6e; }

        /* âœ¨ ì†Œë¦¬ìë°” ì•„ì¹´ë°ë¯¸ ë°°ë„ˆ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .academy-banner {
            display: flex; align-items: center; justify-content: space-between;
            background: linear-gradient(135deg, #6c5e7f 0%, #4a3f58 100%);
            color: white; padding: 18px 25px; border-radius: 20px;
            margin-bottom: 30px; text-decoration: none;
            transition: all 0.3s ease; box-shadow: 0 10px 20px rgba(108, 94, 127, 0.15);
        }
        .academy-banner:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(108, 94, 127, 0.25); }
        .banner-title { font-weight: 800; font-size: 1.1rem; margin-bottom: 4px; display: block; }
        .banner-sub { font-size: 0.85rem; opacity: 0.9; font-weight: 500; }
        .banner-icon { font-size: 1.5rem; }

        .dashboard-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; 
        }

        .menu-card { 
            background: var(--card-white); border-radius: 25px; padding: 35px; 
            text-align: center; text-decoration: none; color: inherit; 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex; flex-direction: column; align-items: center;
            border: 2px solid transparent;
        }
        .menu-card:hover { 
            transform: translateY(-12px); 
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(255, 154, 158, 0.15);
        }

        .icon-circle { 
            width: 80px; height: 80px; background: #f9f9fb; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 40px; margin-bottom: 20px; transition: 0.3s;
        }
        .menu-card:hover .icon-circle { background: var(--accent); transform: rotate(10deg); }

        .title { font-size: 1.3rem; font-weight: 800; margin-bottom: 12px; color: var(--primary); }
        .desc { font-size: 0.95rem; color: #888; line-height: 1.5; font-weight: 500; }

        footer { margin-top: 60px; color: #ccc; font-size: 0.8rem; text-align: center; }
    </style>
</head>
<body onload="initApp()">

    <div id="login-screen">
        <div class="login-box">
            <h2>âŒ¨ï¸ SHORTHAND<br>MASTER</h2>
            <input type="text" id="nameInput" placeholder="ì´ë¦„ì„ ì•Œë ¤ì£¼ì„¸ìš”">
            <input type="password" id="pwInput" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <button onclick="login()" id="loginBtn" class="login-btn">ì ‘ì†í•˜ê¸°</button>
        </div>
    </div>

    <div id="main-screen">
        <header>
            <div class="welcome-txt">âœ¨ <span id="welcomeMsg"></span></div>
            <button onclick="logout()" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
        </header>

        <a href="https://www.sorizavaacademy.com/" target="_blank" class="academy-banner">
            <div>
                <span class="banner-title">ğŸ“ ì†Œë¦¬ìë°” ì•„ì¹´ë°ë¯¸ ë°”ë¡œê°€ê¸°</span>
                <span class="banner-sub">ì‹¤ë ¥ì„ ë” í‚¤ìš°ê³  ì‹¶ë‹¤ë©´ í´ë¦­í•˜ì„¸ìš”!</span>
            </div>
            <div class="banner-icon">â”</div>
        </a>

        <div class="dashboard-grid">
            <a href="toksori2.html" class="menu-card">
                <div class="icon-circle">ğŸ“¢</div>
                <div class="title">ë˜‘ì†Œë¦¬ 2</div>
                <div class="desc">ì±„ì í•˜ê¸°<br>ë‚˜ì˜ ì—°ìŠµ ê¸°ë¡ í™•ì¸</div>
            </a>
            <a href="exam.html" class="menu-card">
                <div class="icon-circle">ğŸ“</div>
                <div class="title">ì…ë¬¸ë°˜ ì¡¸ì—… ì‹œí—˜</div>
                <div class="desc">ì…ë¬¸ë°˜ ì¡¸ì—…ì„ ìœ„í•œ<br>ë‹¨ë¬¸ í…ŒìŠ¤íŠ¸</div>
            </a>
            <a href="measure.html" class="menu-card">
                <div class="icon-circle">â±ï¸</div>
                <div class="title">ììˆ˜ ì¸¡ì •</div>
                <div class="desc">ì‹¤ì‹œê°„ ì†ë„ ì¸¡ì • ë°<br>ìŒì„± íŒŒì¼ ì¬ìƒ</div>
            </a>
            <a href="sparta.html" class="menu-card">
                <div class="icon-circle">ğŸ”¥</div>
                <div class="title">ìŠ¤íŒŒë¥´íƒ€</div>
                <div class="desc">ì§‘ì¤‘ë ¥ì„ ë†’ì—¬ì£¼ëŠ”<br>ê¸´ ë¬¸ì¥ ë³´ê³ ì¹˜ê¸° í›ˆë ¨</div>
            </a>
            <a href="random.html" class="menu-card">
                <div class="icon-circle">ğŸ”€</div>
                <div class="title">ì•½ì–´ ëœë¤</div>
                <div class="desc">ë¬´ì‘ìœ„ ì•½ì–´ ì•”ê¸° ë°<br>ì˜¤ë‹µ ëª©ë¡ ê´€ë¦¬ ëª¨ë“œ</div>
            </a>
        </div>
        <footer>Â© 2025 Created by <b>Gaeul</b>. Keep Typing!</footer>
    </div>

<script>
const GAS_URL = "https://script.google.com/macros/s/AKfycbxaxj3MBG5MK3nIO8hOV3EH9clAQi00pp-L78weLbFP7wj-9X1Fwt9ExUAncapRJsY/exec"; 
let currentUser = localStorage.getItem('shorthand_user');

function initApp() {
    if (currentUser) {
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('main-screen').style.display = 'block';
        
        // âœ¨ ì•„ì¤Œë§ˆë“¤ì„ ìœ„í•œ "ë¹›ë‚˜ëŠ” ë‹¹ì‹ " í›„í‚¹ ë¬¸êµ¬ ì ìš©
        document.getElementById('welcomeMsg').innerHTML = `ì˜¤ëŠ˜ë„ ë¹›ë‚˜ëŠ” <b>${currentUser}</b>ë‹˜! ëˆ„êµ°ê°€ì˜ ì•„ë‚´ë³´ë‹¤ 'ë‚˜'ë¡œ ì„±ì¥í•  ì˜¤ëŠ˜ì„ ì‘ì›í•©ë‹ˆë‹¤. ğŸŒ¸`;
        
        checkAuth(); 
    } else {
        document.getElementById('login-screen').style.display = 'flex';
        document.getElementById('main-screen').style.display = 'none';
    }
}

async function login() {
    const name = document.getElementById('nameInput').value.trim();
    const pw = document.getElementById('pwInput').value;
    if(!name || !pw) return alert("ì´ë¦„ê³¼ ë¹„ë²ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ˜Š");
    
    document.getElementById('loginBtn').innerText = "ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...";
    try {
        const res = await fetch(GAS_URL, { method: "POST", body: JSON.stringify({ action: "login", name: name, pw: pw }) });
        const data = await res.json();
        if (data.result === "success") { 
            currentUser = data.name; 
            localStorage.setItem('shorthand_user', currentUser); 
            localStorage.setItem('shorthand_token', data.token); 
            initApp(); 
        } else { 
            alert("ì•—, ì´ë¦„ì´ë‚˜ ë¹„ë²ˆì´ í‹€ë¦° ê²ƒ ê°™ì•„ìš”! ğŸ˜¢"); 
        }
    } catch(e) { 
        alert("ì„œë²„ì™€ ì—°ê²°ì´ ì•ˆ ë˜ë„¤ìš”. ë‚˜ì¤‘ì— ë‹¤ì‹œ í•´ë³¼ê¹Œìš”?"); 
    }
    document.getElementById('loginBtn').innerText = "ë°˜ê°€ì›Œìš”! ì ‘ì†í•˜ê¸°";
}

async function checkAuth() {
    const name = localStorage.getItem('shorthand_user');
    const token = localStorage.getItem('shorthand_token');
    if (!name || !token) return;

    try {
        const res = await fetch(GAS_URL, { 
            method: "POST", 
            body: JSON.stringify({ action: "checkToken", name: name, token: token }) 
        });
        const data = await res.json();
        if (data.result === "invalid") {
            alert("ğŸš¨ ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ ë¡œê·¸ì¸ì´ ê°ì§€ë˜ì–´ ì ‘ì†ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.");
            localStorage.clear();
            location.reload();
        }
    } catch(e) { console.log("ì¸ì¦ ì²´í¬ ëŒ€ê¸° ì¤‘..."); }
}

function logout() {
    if(confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ë‚˜ìš”?")) {
        localStorage.clear(); 
        location.reload();
    }
}

setInterval(checkAuth, 60000);
</script>
</body>
</html>
